branches:
  only:
    - master

environment:
  matrix:
    - os: Visual Studio 2015

clone_folder: c:\projects\CPX

before_build:
  - mkdir c:\projects\CPX\build
  - cd c:\projects\CPX\build
  - cmake -D CMAKE_BUILD_TYPE=Debug -D ENABLE_TEST=ON ..

build_script:
  - cd c:\projects\CPX\build
  - msbuild CPX.sln

test_script:
  - cd c:\projects\CPX\build
  - msbuild test\runtests.vcxproj

notifications:
  - provider: Email
    to:
      - mkomm@cern.ch
    subject: 'Build {{status}}'
    message: "{{message}}, {{commitId}}"
    on_build_status_changed: true
    
